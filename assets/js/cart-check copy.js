let shopList = [
    {
        rentals: [
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
            {
                item: "Chidex",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-14-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Chidex Man",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-18-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
            {
                item: "Chidex",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-14-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Chidex Man",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-18-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
            {
                item: "Chidex",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-14-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Chidex Man",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-18-600x734.jpg",
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Gold and White Plinths",
                price: "$400.00",
                coverImage: "http://localhost:5501/assets/images/goldplinths1.png",
                size: ['5', '10', '15', '20', '25', '30', '35'],
                color: ['white', 'gold', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: false,
                productStatus: "AVAILABLE"
            },
            {
                item: "Balloon Sizer",
                price: "$200.00",
                coverImage: "http://localhost:5501/assets/images/numberballoons3.png",
                size: [],
                color: ['green', 'green', 'blue', 'red', 'black', 'yellow', 'green', 'silver'],
                inputColor: true,
                imageList: ['http://localhost:5501/assets/images/NumberBalloons.png', 'http://localhost:5501/assets/images/numberballoons1.png', 'http://localhost:5501/assets/images/numberballoons2.png'],
                productStatus: "UNAVAILABLE"

            },
            {
                item: "Number Balloons",
                price: "$180.00",
                coverImage: "https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-13-600x734.jpg",
                productStatus: "AVAILABLE"

            },
        ],
    },

    {
        sale: [
            {
                item: "mop1",
                price: "$400.00",
                image: "http://localhost:5501/assets/images/goldplinths1.png",
            },
            {
                item: "monitor1",
                price: "$200.00",
                image: "http://localhost:5501/assets/images/balloonsizer1.png",
            },
            {
                item: "laptop1",
                price: "$180.00",
                image: "http://localhost:5501/assets/images/numberballoons3.png",
            },
        ],
    },
    {
        vehicle: [
            {
                item: "mop",
                price: "$400.00",
                image: "http://localhost:5501/assets/images/goldplinths1.png",
            },
            {
                item: "monitor",
                price: "$200.00",
                image: "http://localhost:5501/assets/images/balloonsizer1.png",
            },
            {
                item: "laptop",
                price: "$180.00",
                image: "http://localhost:5501/assets/images/numberballoons3.png",
            },
        ],
    },
    {
        fuckingHell: [
            {
                item: "mop",
                price: "$400.00",
                image: "http://localhost:5501/assets/images/goldplinths1.png",
            },
            {
                item: "monitor",
                price: "$200.00",
                image: "http://localhost:5501/assets/images/balloonsizer1.png",
            },
            {
                item: "laptop",
                price: "$180.00",
                image: "http://localhost:5501/assets/images/numberballoons3.png",
            },
            {
                item: "mop2",
                price: "$400.00",
                image: "http://localhost:5501/assets/images/goldplinths1.png",
            },
            {
                item: "monitor2",
                price: "$200.00",
                image: "http://localhost:5501/assets/images/balloonsizer1.png",
            },
            {
                item: "laptop2",
                price: "$180.00",
                image: "http://localhost:5501/assets/images/numberballoons3.png",
            },
        ],
    },
];


let cartTemplate = `
    <div class="qodef-woo-dropdown-items">
		<div class="qodef-woo-dropdown-item qodef-e">
			<div class="qodef-e-image">
				<a href="https://banquet.qodeinteractive.com/product/minimal-vase/"><img width="600" height="734" src="https://banquet.qodeinteractive.com/wp-content/uploads/2019/11/shop-img-3-600x734.jpg" class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt="u" loading="lazy"></a>				
            </div>
			<div class="qodef-e-content">
				<h6 itemprop="name" class="qodef-e-title entry-title">
				<a href="https://banquet.qodeinteractive.com/product/minimal-vase/">Minimal vase</a>					</h6>
                <p class="qodef-e-price"><span class="woocommerce-Price-amount amount"><bdi>50.00<span class="woocommerce-Price-currencySymbol">$</span></bdi></span></p>
                <p class="qodef-e-quantity">Piece: 1</p>
                <a href="https://banquet.qodeinteractive.com/cart/?remove_item=e96ed478dab8595a7dbda4cbcbee168f&amp;_wpnonce=b84ac15c7e" class="qodef-e-remove remove" title="Remove this item"><span class="qodef-icon-elegant-icons icon_close"></span></a>				
            </div>
		</div>
    </div>
  `

function displayUserCart(collectedArray) {
    let parsedArray = collectedArray;
    let cartItems;
    let cartTitle;
    let productQuantity = 5;
    let cartTitleTemplate = ''
    let cartListsTemplate = ''

    // console.log(parsedArray)


    collectedArray.forEach(collectedArrayItem => {
        // console.log(collectedArrayItem)
        // cartTitle = collectedArrayItem.title;

        cartTitleTemplate = `
        <div class="qodef-woo-dropdown-cart qodef-m">
                    <div class="qodef-woo-dropdown-cart-inner qodef-m-inner">
                      <a itemprop="url" class="qodef-m-opener" href="/cart">
                        <span class="qodef-m-opener-icon">${collectedArrayItem?.title}</span>
                      </a>
                    </div>
                    </div>
    `
        cartListsTemplate += `
        <div class="qodef-woo-dropdown-items">
            <div class='qodef-woo-dropdown-item qodef-e'>
                        <div class='qodef-e-image'>
                                <a><img width='600' height='734' src='${collectedArrayItem?.lists?.image}' class='attachment-woocommerce_thumbnail size-woocommerce_thumbnail' alt='e' loading='lazy'></a>				</div>
                            <div class='qodef-e-content'>
                        <h6 itemprop='name' class='qodef-e-title entry-title'>
                            <a>${collectedArrayItem?.lists?.item}</a>
                        </h6>
                            <p class='qodef-e-price'><span class='woocommerce-Price-amount amount'><bdi>${collectedArrayItem?.lists?.price}<span class='woocommerce-Price-currencySymbol'>$</span></bdi></span></p>
                            <p class='qodef-e-quantity'>Piece: ${productQuantity}</p>
                        <a href='https://banquet.qodeinteractive.com/cart/?remove_item=82aa4b0af34c2313a562076992e50aa3&amp;_wpnonce=4fd39c6539' class='qodef-e-remove remove' title='Remove this item'><span class='qodef-icon-elegant-icons icon_close'></span></a>				</div>
            </div>
        </div>
                    `;
    });

    // console.log('title', cartTitleTemplate)
    // console.log('lists', cartListsTemplate)

    // console.log(cartTitle, cartItems)

    // let cartTitleTemplate = `
    // <div class="qodef-woo-dropdown-cart qodef-m">
    //                 <div class="qodef-woo-dropdown-cart-inner qodef-m-inner">
    //                   <a itemprop="url" class="qodef-m-opener" href="/cart">
    //                     <span class="qodef-m-opener-icon">${cartTitle}</span>
    //                   </a>
    //                 </div>
    //                 </div>
    // `

    //   let productImage = lists.image;
    //   let productTitle = lists.item;
    //   let productPrice = lists.price;
    //   let productQuantity = 5;
    //   console.log(title, shopTitle, lists)

    //   let cartContainerSell = `
    //                     <div class='qodef-woo-dropdown-item qodef-e'>
    //                                 <div class='qodef-e-image'>
    //                                     <a><img width='600' height='734' src='${productImage}' class='attachment-woocommerce_thumbnail size-woocommerce_thumbnail' alt='e' loading='lazy'></a>				</div>
    //                                 <div class='qodef-e-content'>
    //                                     <h6 itemprop='name' class='qodef-e-title entry-title'>
    //                                         <a>${productTitle}</a>					</h6>
    //                                     <p class='qodef-e-price'><span class='woocommerce-Price-amount amount'><bdi>${productPrice}<span class='woocommerce-Price-currencySymbol'>$</span></bdi></span></p>
    //                                     <p class='qodef-e-quantity'>Piece: ${productQuantity}</p>
    //                                     <a href='https://banquet.qodeinteractive.com/cart/?remove_item=82aa4b0af34c2313a562076992e50aa3&amp;_wpnonce=4fd39c6539' class='qodef-e-remove remove' title='Remove this item'><span class='qodef-icon-elegant-icons icon_close'></span></a>				</div>
    //                             </div>
    //                     `;



    // document.getElementById("cart-items").innerHTML = ''
    //     document.getElementById("cart-items").innerHTML += `
    //   ${cartTitleTemplate}
    //   <br>
    //   ${cartListsTemplate}
    //   <br>
    //   <br>

    //   `;
    // document.getElementById('cart-items').innerHTML = cartTemplate;

}

async function checkCustomerUserAgent(customerUserAgent) {
    console.log('here')
    let url = `https://jh8fvy-3000.csb.app/getcart`;
    let x = await fetch(url);
    let y = await x.json();
    let data = y;
    console.log(data)

    for (let x = 0; x < data?.length; x++) {
        let allData = data[x];
        let allUserAgents = allData?.customerUserAgent;

        function checkItemData({
            customerCartItemCategory,
            customerItemCategoryLists,
            matchedCategory,
            shopListCategory
        }) {
            let collectedArray = []
            let shopAndCustomerMatchedTitle = Object.getOwnPropertyNames(shopListCategory).sort()[0]
            for (let x = 0; x < matchedCategory?.length; x++) {
                matchedCategory[x].item == customerItemCategoryLists[x]
                    ? collectedArray.push({ title: customerCartItemCategory, lists: matchedCategory[x] })
                    : null;
            }
            displayUserCart(collectedArray)
        }
        if (customerUserAgent == allUserAgents) {
            let customerCart = allData?.customerCart;
            let customerCategories = Object.getOwnPropertyNames(customerCart).sort();
            let customerCartItemCategory;
            let customerItemCategoryLists;

            for (let x = 0; x < customerCategories?.length; x++) {
                customerCartItemCategory = customerCategories[x];
                customerItemCategoryLists = customerCart?.[customerCartItemCategory];
                shopList.map((shopListCategory) => {
                    let matchedCategory = shopListCategory?.[customerCartItemCategory];
                    matchedCategory != undefined
                        ? checkItemData({
                            customerCartItemCategory: customerCartItemCategory,
                            customerItemCategoryLists: customerItemCategoryLists,
                            matchedCategory: matchedCategory,
                            shopListCategory: shopListCategory
                        })
                        : null;
                });
            }
        } else {
            console.log("not this  user");
            //     document.getElementById("cart-items").innerHTML = `<p class="qodef-m-posts-not-found qodef-grid-item">
            //     No products in the cart.
            //   </p>`
        }
    }
}

(function () {
    "use strict";

    var module = {
        options: [],
        header: [
            navigator.platform,
            navigator.userAgent,
            navigator.appVersion,
            navigator.vendor,
            window.opera,
        ],
        dataos: [
            { name: "Windows Phone", value: "Windows Phone", version: "OS" },
            { name: "Windows", value: "Win", version: "NT" },
            { name: "iPhone", value: "iPhone", version: "OS" },
            { name: "iPad", value: "iPad", version: "OS" },
            { name: "Kindle", value: "Silk", version: "Silk" },
            { name: "Android", value: "Android", version: "Android" },
            { name: "PlayBook", value: "PlayBook", version: "OS" },
            { name: "BlackBerry", value: "BlackBerry", version: "/" },
            { name: "Macintosh", value: "Mac", version: "OS X" },
            { name: "Linux", value: "Linux", version: "rv" },
            { name: "Palm", value: "Palm", version: "PalmOS" },
        ],
        databrowser: [
            { name: "Chrome", value: "Chrome", version: "Chrome" },
            { name: "Firefox", value: "Firefox", version: "Firefox" },
            { name: "Safari", value: "Safari", version: "Version" },
            { name: "Internet Explorer", value: "MSIE", version: "MSIE" },
            { name: "Opera", value: "Opera", version: "Opera" },
            { name: "BlackBerry", value: "CLDC", version: "CLDC" },
            { name: "Mozilla", value: "Mozilla", version: "Mozilla" },
        ],
        init: function () {
            var agent = this.header.join(" "),
                os = this.matchItem(agent, this.dataos),
                browser = this.matchItem(agent, this.databrowser);

            return { os: os, browser: browser };
        },
        matchItem: function (string, data) {
            var i = 0,
                j = 0,
                html = "",
                regex,
                regexv,
                match,
                matches,
                version;

            for (i = 0; i < data.length; i += 1) {
                regex = new RegExp(data[i].value, "i");
                match = regex.test(string);
                if (match) {
                    regexv = new RegExp(data[i].version + "[- /:;]([\\d._]+)", "i");
                    matches = string.match(regexv);
                    version = "";
                    if (matches) {
                        if (matches[1]) {
                            matches = matches[1];
                        }
                    }
                    if (matches) {
                        matches = matches.split(/[._]+/);
                        for (j = 0; j < matches.length; j += 1) {
                            if (j === 0) {
                                version += matches[j] + ".";
                            } else {
                                version += matches[j];
                            }
                        }
                    } else {
                        version = "0";
                    }
                    return {
                        name: data[i].name,
                        version: parseFloat(version),
                    };
                }
            }
            return { name: "unknown", version: 0 };
        },
    };
    checkCustomerUserAgent("breezymoney");

    console.log(navigator.userAgent);


    // getCartData(navigator.userAgent)

    // var e = module.init(),
    //     debug = '';
    // debug += 'navigator.userAgent = ' + navigator.userAgent + '<br/>';

    // debug += 'os.name = ' + e.os.name + '<br/>';
    // debug += 'os.version = ' + e.os.version + '<br/>';
    // debug += 'browser.name = ' + e.browser.name + '<br/>';
    // debug += 'browser.version = ' + e.browser.version + '<br/>';

    // debug += '<br/>';
    // debug += 'navigator.userAgent = ' + navigator.userAgent + '<br/>';
    // debug += 'navigator.appVersion = ' + navigator.appVersion + '<br/>';
    // debug += 'navigator.platform = ' + navigator.platform + '<br/>';
    // debug += 'navigator.vendor = ' + navigator.vendor + '<br/>';

    // document.getElementById('log').innerHTML = debug;
})();
